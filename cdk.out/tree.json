{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"user-platform-pipeline":{"id":"user-platform-pipeline","path":"user-platform-pipeline","children":{"ArtifactBucket":{"id":"ArtifactBucket","path":"user-platform-pipeline/ArtifactBucket","children":{"Resource":{"id":"Resource","path":"user-platform-pipeline/ArtifactBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"tags":[{"key":"AppOwner","value":"platform-team"},{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Environment","value":"staging"},{"key":"Project","value":"user-platform"}],"versioningConfiguration":{"status":"Enabled"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.191.0"}},"Policy":{"id":"Policy","path":"user-platform-pipeline/ArtifactBucket/Policy","children":{"Resource":{"id":"Resource","path":"user-platform-pipeline/ArtifactBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"ArtifactBucket7410C9EF"},"policyDocument":{"Statement":[{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.191.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.191.0","metadata":[]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"user-platform-pipeline/ArtifactBucket/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"user-platform-pipeline/ArtifactBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.191.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.191.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.191.0","metadata":[]}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"user-platform-pipeline/Custom::S3AutoDeleteObjectsCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"user-platform-pipeline/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.191.0"}},"Role":{"id":"Role","path":"user-platform-pipeline/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.191.0"}},"Handler":{"id":"Handler","path":"user-platform-pipeline/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.191.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.191.0"}},"GithubToken":{"id":"GithubToken","path":"user-platform-pipeline/GithubToken","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.191.0","metadata":[]}},"BuildProject":{"id":"BuildProject","path":"user-platform-pipeline/BuildProject","children":{"Role":{"id":"Role","path":"user-platform-pipeline/BuildProject/Role","children":{"ImportRole":{"id":"ImportRole","path":"user-platform-pipeline/BuildProject/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.191.0","metadata":[]}},"Resource":{"id":"Resource","path":"user-platform-pipeline/BuildProject/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"AppOwner","value":"platform-team"},{"key":"Environment","value":"staging"},{"key":"Project","value":"user-platform"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.191.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"user-platform-pipeline/BuildProject/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"user-platform-pipeline/BuildProject/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-1:837672867422:log-group:/aws/codebuild/",{"Ref":"BuildProject097C5DB7"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:us-east-1:837672867422:log-group:/aws/codebuild/",{"Ref":"BuildProject097C5DB7"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:us-east-1:837672867422:report-group/",{"Ref":"BuildProject097C5DB7"},"-*"]]}},{"Action":["ssm:GetParameter","cloudformation:*","iam:PassRole","sts:AssumeRole","s3:*","lambda:*"],"Effect":"Allow","Resource":"*"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"BuildProjectRoleDefaultPolicy3E9F248C","roles":[{"Ref":"BuildProjectRoleAA92C755"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.191.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.191.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.191.0","metadata":[]}},"Resource":{"id":"Resource","path":"user-platform-pipeline/BuildProject/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"encryptionKey":"alias/aws/s3","environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":true,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["BuildProjectRoleAA92C755","Arn"]},"source":{"type":"CODEPIPELINE"},"tags":[{"key":"AppOwner","value":"platform-team"},{"key":"Environment","value":"staging"},{"key":"Project","value":"user-platform"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.191.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.191.0","metadata":[]}},"CodePipeline":{"id":"CodePipeline","path":"user-platform-pipeline/CodePipeline","children":{"Role":{"id":"Role","path":"user-platform-pipeline/CodePipeline/Role","children":{"ImportRole":{"id":"ImportRole","path":"user-platform-pipeline/CodePipeline/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.191.0","metadata":[]}},"Resource":{"id":"Resource","path":"user-platform-pipeline/CodePipeline/Role/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"AppOwner","value":"platform-team"},{"key":"Environment","value":"staging"},{"key":"Project","value":"user-platform"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.191.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"user-platform-pipeline/CodePipeline/Role/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"user-platform-pipeline/CodePipeline/Role/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ArtifactBucket7410C9EF","Arn"]},"/*"]]}]},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["CodePipelineBuildAndDeployCDKBuildDeployCodePipelineActionRole2F16639F","Arn"]}}],"Version":"2012-10-17"},"policyName":"CodePipelineRoleDefaultPolicy8D520A8D","roles":[{"Ref":"CodePipelineRoleB3A660B4"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.191.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.191.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.191.0","metadata":[]}},"Resource":{"id":"Resource","path":"user-platform-pipeline/CodePipeline/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"ArtifactBucket7410C9EF"}},"roleArn":{"Fn::GetAtt":["CodePipelineRoleB3A660B4","Arn"]},"stages":[{"name":"Source","actions":[{"name":"GitHub_Source","outputArtifacts":[{"name":"SourceOutput"}],"actionTypeId":{"category":"Source","version":"1","owner":"ThirdParty","provider":"GitHub"},"configuration":{"Owner":"KalebHawkins","Repo":"demo-repo","Branch":"main","OAuthToken":{"Fn::Join":["",["{{resolve:secretsmanager:arn:",{"Ref":"AWS::Partition"},":secretsmanager:us-east-1:837672867422:secret:demo-repo-ghtoken:SecretString:::}}"]]},"PollForSourceChanges":false},"runOrder":1}]},{"name":"BuildAndDeploy","actions":[{"name":"CDK_BuildDeploy","inputArtifacts":[{"name":"SourceOutput"}],"outputArtifacts":[{"name":"BuildOutput"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"BuildProject097C5DB7"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["CodePipelineBuildAndDeployCDKBuildDeployCodePipelineActionRole2F16639F","Arn"]}}]}],"tags":[{"key":"AppOwner","value":"platform-team"},{"key":"Environment","value":"staging"},{"key":"Project","value":"user-platform"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.191.0"}},"Source":{"id":"Source","path":"user-platform-pipeline/CodePipeline/Source","children":{"GitHub_Source":{"id":"GitHub_Source","path":"user-platform-pipeline/CodePipeline/Source/GitHub_Source","children":{"WebhookResource":{"id":"WebhookResource","path":"user-platform-pipeline/CodePipeline/Source/GitHub_Source/WebhookResource","attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Webhook","aws:cdk:cloudformation:props":{"authentication":"GITHUB_HMAC","authenticationConfiguration":{"secretToken":{"Fn::Join":["",["{{resolve:secretsmanager:arn:",{"Ref":"AWS::Partition"},":secretsmanager:us-east-1:837672867422:secret:demo-repo-ghtoken:SecretString:::}}"]]}},"filters":[{"jsonPath":"$.ref","matchEquals":"refs/heads/{Branch}"}],"registerWithThirdParty":true,"targetAction":"GitHub_Source","targetPipeline":{"Ref":"CodePipelineB74E5936"},"targetPipelineVersion":1}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnWebhook","version":"2.191.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}},"BuildAndDeploy":{"id":"BuildAndDeploy","path":"user-platform-pipeline/CodePipeline/BuildAndDeploy","children":{"CDK_BuildDeploy":{"id":"CDK_BuildDeploy","path":"user-platform-pipeline/CodePipeline/BuildAndDeploy/CDK_BuildDeploy","children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"user-platform-pipeline/CodePipeline/BuildAndDeploy/CDK_BuildDeploy/CodePipelineActionRole","children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"user-platform-pipeline/CodePipeline/BuildAndDeploy/CDK_BuildDeploy/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.191.0","metadata":[]}},"Resource":{"id":"Resource","path":"user-platform-pipeline/CodePipeline/BuildAndDeploy/CDK_BuildDeploy/CodePipelineActionRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CodePipelineRoleB3A660B4","Arn"]}}}],"Version":"2012-10-17"},"tags":[{"key":"AppOwner","value":"platform-team"},{"key":"Environment","value":"staging"},{"key":"Project","value":"user-platform"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.191.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"user-platform-pipeline/CodePipeline/BuildAndDeploy/CDK_BuildDeploy/CodePipelineActionRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"user-platform-pipeline/CodePipeline/BuildAndDeploy/CDK_BuildDeploy/CodePipelineActionRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["BuildProject097C5DB7","Arn"]}}],"Version":"2012-10-17"},"policyName":"CodePipelineBuildAndDeployCDKBuildDeployCodePipelineActionRoleDefaultPolicy23EDA0E5","roles":[{"Ref":"CodePipelineBuildAndDeployCDKBuildDeployCodePipelineActionRole2F16639F"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.191.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.191.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.191.0","metadata":[]}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.191.0","metadata":[]}},"BootstrapVersion":{"id":"BootstrapVersion","path":"user-platform-pipeline/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.191.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"user-platform-pipeline/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.191.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.191.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.191.0"}}}